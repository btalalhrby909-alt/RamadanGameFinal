<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ØªØ­Ø¯ÙŠ Ø±Ù…Ø¶Ø§Ù† Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† ğŸŒğŸŒ™</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        :root { --gold: #fbbf24; --night: #020617; --emerald: #064e3b; --danger: #ef4444; }
        body { background: var(--night); color: white; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .box { width: 90%; max-width: 500px; padding: 30px; border: 2px solid var(--gold); border-radius: 40px; background: rgba(30, 41, 59, 0.95); text-align: center; box-shadow: 0 0 30px rgba(251, 191, 36, 0.1); }
        input { width: 100%; padding: 15px; margin: 10px 0; border-radius: 15px; border: 1px solid #334155; background: #0f172a; color: white; text-align: center; font-size: 18px; }
        .btn { cursor: pointer; padding: 15px; border-radius: 15px; border: none; font-weight: bold; width: 100%; margin-top: 10px; transition: 0.3s; font-size: 18px; }
        .btn-gold { background: var(--gold); color: black; }
        .btn-gold:hover { transform: scale(1.02); }
        #timer { font-size: 60px; font-weight: 900; color: var(--gold); margin: 10px 0; }
        .status-msg { margin-top: 15px; font-weight: bold; color: var(--gold); min-height: 24px; }
    </style>
</head>
<body>

<div class="box" id="mainBox">
    <div id="lobby">
    <h1>Ù…Ø¬Ù„Ø³ Ø±Ù…Ø¶Ø§Ù† ğŸŒ™</h1>
    <input type="text" id="username" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø±">
    <input type="text" id="roomCode" placeholder="ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ© (Ù…Ø«Ù„Ø§Ù‹: 123)">
    <button class="btn btn-gold" onclick="connectToRoom()">Ø¯Ø®ÙˆÙ„ Ø§Ù„ØºØ±ÙØ© ğŸš€</button>
</div>

    <div id="game" style="display: none;">
        <div style="display: flex; justify-content: space-around; font-size: 20px; font-weight: bold;">
            <div>Ø§Ù„ÙØ¦Ø©: <span id="catDisplay" style="color: white;">-</span></div>
            <div>Ø§Ù„Ø­Ø±Ù: <span id="charDisplay" style="color: white;">-</span></div>
        </div>
        
        <div id="timer">20</div>

        <input type="text" id="answerInput" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§..." autocomplete="off">
        <button class="btn btn-gold" onclick="sendAnswer()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© âœ…</button>
        
        <div class="status-msg" id="status"></div>
    </div>
</div>

<script>
const socket = io("https://ramadangamefinal.onrender.com");
    function connectToServer() {
        const name = document.getElementById('username').value;
        if (name) {
            document.getElementById('lobby').style.display = 'none';
            document.getElementById('game').style.display = 'block';
            socket.emit('joinGame', name);
        } else {
            alert("Ù„Ø§Ø²Ù… ØªÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!");
        }
    }

    function connectToRoom() {
    const name = document.getElementById('username').value;
    const room = document.getElementById('roomCode').value;
    if (name && room) {
        document.getElementById('lobby').style.display = 'none';
        document.getElementById('game').style.display = 'block';
        socket.emit('joinRoom', room, name); // Ù†Ø±Ø³Ù„ Ø§Ù„ÙƒÙˆØ¯ ÙˆØ§Ù„Ø§Ø³Ù… Ù„Ù„Ø³ÙŠØ±ÙØ±
    } else {
        alert("Ù„Ø§Ø²Ù… ØªÙƒØªØ¨ Ø§Ø³Ù…Ùƒ ÙˆÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©!");
    }
}

    function sendAnswer() {
        const ans = document.getElementById('answerInput').value;
        if (ans) {
            socket.emit('submitAnswer', ans);
            document.getElementById('answerInput').value = "";
        }
    }

    socket.on('msg', (text) => {
        document.getElementById('status').innerText = text;
    });
</script>
</body>
</html>
